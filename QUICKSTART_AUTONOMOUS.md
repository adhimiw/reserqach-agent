# Quick Start: Autonomous Code Execution

## What is this?

Your data science agent can now write, save, and execute its own Python code! No more pre-coded logic - the agent generates custom solutions for each dataset and has full control over its own Python environment and terminal.

## 5-Minute Quick Start

### 1. Run Your First Autonomous Analysis

```bash
# Navigate to project directory
cd /home/engine/project

# Activate virtual environment (if not already active)
source venv/bin/activate

# Run autonomous analysis on your dataset
python main_autonomous.py your_dataset.csv
```

That's it! The agent will:
1. Create an isolated Python environment
2. Generate Python code for exploratory analysis
3. Save the code as a `.py` file
4. Execute the code
5. Generate visualizations
6. Create a Jupyter notebook

### 2. View Generated Code

After analysis completes, you can see all the generated code:

```bash
# List all generated Python files
ls output/analyses/{your_dataset}/{timestamp}/generated_code/

# View a specific generated file
cat output/analyses/{your_dataset}/{timestamp}/generated_code/exploratory_analysis_*.py

# Or open in your editor
code output/analyses/{your_dataset}/{timestamp}/generated_code/exploratory_analysis_*.py
```

### 3. Re-run Generated Code

```bash
# Execute any generated file directly
python output/analyses/{your_dataset}/{timestamp}/generated_code/exploratory_analysis_*.py
```

### 4. Open Jupyter Notebook

```bash
# Start Jupyter
jupyter notebook

# Navigate to output/analyses/{your_dataset}/{timestamp}/notebooks/
# Open the generated analysis notebook
```

### 5. With Target Column (Model Building)

```bash
python main_autonomous.py your_dataset.csv --target your_target_column
```

This adds:
- Feature engineering code
- Model training code
- Model evaluation code
- Feature importance visualizations

### 6. With LLM Council Guidance (Best!)

```bash
python main_autonomous_with_council.py your_dataset.csv --target your_target_column
```

Combines autonomous coding with LLM Council consensus for:
- Better analysis strategies
- Smarter model selection
- More comprehensive insights

## Understanding the Output

```
output/analyses/{dataset_name}/{timestamp}/
â”‚
â”œâ”€â”€ generated_code/           â† All Python code generated by agent
â”‚   â”œâ”€â”€ exploratory_analysis_20260126_105941.py
â”‚   â”œâ”€â”€ feature_engineering_20260126_105942.py
â”‚   â”œâ”€â”€ model_building_20260126_105943.py
â”‚   â””â”€â”€ code_manifest.json   â† Inventory of all code
â”‚
â”œâ”€â”€ notebooks/               â† Jupyter notebooks
â”‚   â””â”€â”€ analysis_20260126_105941.ipynb
â”‚
â”œâ”€â”€ visualizations/          â† Charts and plots
â”‚   â”œâ”€â”€ distributions/
â”‚   â”œâ”€â”€ correlations/
â”‚   â””â”€â”€ feature_importance.png
â”‚
â”œâ”€â”€ envs/                   â† Isolated Python environment
â”‚   â””â”€â”€ analysis_env/
â”‚
â”œâ”€â”€ data/                   â”œâ”€â”€ original.csv
â”‚
â”œâ”€â”€ logs/                   â”œâ”€â”€ autonomous_execution_log.json
â”‚
â””â”€â”€ autonomous_analysis_results.json  â† Complete results
```

## Key Commands

| Command | Description |
|---------|-------------|
| `python main_autonomous.py data.csv` | Basic autonomous analysis |
| `python main_autonomous.py data.csv --target col` | With modeling |
| `python main_autonomous.py data.csv --target col --task-type classification` | Specific task type |
| `python main_autonomous_with_council.py data.csv --target col` | With LLM Council |
| `python test_autonomous_coding.py` | Run tests |

## What Makes This Powerful?

### Before (Old System)
- Pre-coded analysis logic
- Limited to what developers programmed
- Cannot adapt to unique datasets
- No code visibility
- Hard to debug
- No reproducibility

### After (New Autonomous System)
- âœ… Agent generates custom code for each dataset
- âœ… Unlimited flexibility - any Python code possible
- âœ… All code saved and visible
- âœ… Easy to debug and modify
- âœ… Fully reproducible
- âœ… Full terminal access
- âœ… Isolated execution environment

## Example Generated Code

Here's what the agent actually generates:

```python
"""
Generated by Autonomous Code Execution Agent
Filename: exploratory_analysis_20260126_105941.py
Generated: 2026-01-26T10:59:41.123456
Description: Exploratory data analysis with visualizations
"""

import pandas as pd
import numpy as np
import matplotlib.pyplot as plt
import seaborn as sns
import json
import os

# Load dataset
df = pd.read_csv('data/original.csv')

print("="*60)
print("EXPLORATORY DATA ANALYSIS")
print("="*60)

# Dataset info
print(f"\nDataset Shape: {df.shape}")
print(f"\nColumns: {list(df.columns)}")

# Summary statistics
print(f"\nSummary Statistics:\n{df.describe()}")

# Missing values
missing = df.isnull().sum()
print(f"\nMissing Values:\n{missing[missing > 0]}")

# Visualizations
output_dir = 'visualizations'
os.makedirs(output_dir, exist_ok=True)

# Distribution plots
numeric_cols = df.select_dtypes(include=[np.number]).columns
for col in numeric_cols[:5]:
    plt.figure(figsize=(8, 5))
    sns.histplot(df[col].dropna(), kde=True)
    plt.title(f'Distribution of {col}')
    plt.savefig(f'{output_dir}/distribution_{col}.png')
    plt.close()

# Correlation heatmap
if len(numeric_cols) > 1:
    plt.figure(figsize=(12, 8))
    sns.heatmap(df[numeric_cols].corr(), annot=True, cmap='coolwarm', center=0)
    plt.title('Correlation Heatmap')
    plt.savefig(f'{output_dir}/correlation_heatmap.png')
    plt.close()

# Save summary
summary = {
    'shape': df.shape,
    'columns': list(df.columns),
    'numeric_columns': list(numeric_cols),
    'missing_values': missing.to_dict()
}

with open('data/eda_summary.json', 'w') as f:
    json.dump(summary, f, indent=2)

print("\nâœ“ Exploratory analysis complete")
print(f"âœ“ Visualizations saved to {output_dir}")
print(f"âœ“ Summary saved to data/eda_summary.json")
```

You can see, edit, and re-run this code directly!

## Troubleshooting

### UV Not Found
```bash
# Install UV
curl -LsSf https://astral.sh/uv/install.sh | sh

# Or use standard venv instead
# (The system will automatically fall back)
```

### Environment Setup Fails
```bash
# Check if Python is available
python --version

# Manually create environment
python -m venv test_env
source test_env/bin/activate
pip install pandas numpy matplotlib
```

### Code Execution Times Out
The system has built-in timeouts, but you can adjust them in the code if needed.

## Next Steps

1. **Read the full documentation**: `AUTONOMOUS_CODING_README.md`
2. **Run tests**: `python test_autonomous_coding.py`
3. **Explore generated code**: Look at the `.py` files in `generated_code/`
4. **Customize**: Edit generated code and re-run it
5. **Integrate with MCP Code Executor**: See AUTONOMOUS_CODING_README.md for future roadmap

## Key Benefits Summary

ğŸš€ **Autonomous**: Agent writes its own code, no human coding required
ğŸ’¾ **Persistent**: All code saved as files for transparency and reusability
ğŸ”’ **Safe**: Isolated execution environment
ğŸ” **Visible**: Complete code visibility for debugging and learning
â™»ï¸ **Reproducible**: Code can be run independently any time
ğŸŒ **Powerful**: Full terminal access for unlimited possibilities
ğŸ¤ **Intelligent**: LLM Council guidance for smarter decisions
ğŸ“Š **Complete**: Generates notebooks, visualizations, and reports

## Support

- Documentation: `AUTONOMOUS_CODING_README.md`
- Tests: `test_autonomous_coding.py`
- Examples: Check `output/analyses/` after running analyses
- Main README: `README.md`
